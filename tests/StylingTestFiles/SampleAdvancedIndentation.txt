function init()
    m.posterImage = m.top.findNode("posterImage")
    m.posterImageDefault = m.top.findNode("posterImageDefault")
end function

function itemContentChanged()
    itemContent = m.top.itemContent

    m.posterImage.width = itemContent.width
    m.posterImage.height = itemContent.height
    m.posterImage.uri = _preparePosterUrl(itemContent)
    m.posterImage.scaleRotateCenter = "[" + ((itemContent.width * itemContent.focusedResizeFactor) / 2).ToStr() + "," + ((itemContent.height * itemContent.focusedResizeFactor) / 2).ToStr() + "]"
    m.posterImage.translation = "[" + (((itemContent.width * itemContent.focusedResizeFactor) - itemContent.width) / 2).ToStr() + "," + (((itemContent.height * itemContent.focusedResizeFactor) - itemContent.height) / 2).ToStr() + "]"
    m.posterImage.scale = "[" + (itemContent.resizeFactor).ToStr() + "," + (itemContent.resizeFactor).ToStr() +"]"

    m.posterImageDefault.width = m.posterImage.width
    m.posterImageDefault.height = m.posterImage.height
    m.posterImageDefault.scale = m.posterImage.scale
    m.posterImageDefault.scaleRotateCenter = m.posterImage.scaleRotateCenter
    m.posterImageDefault.translation = m.posterImage.translation
end function

function _preparePosterUrl(itemContent as Object) as Object
    if type(itemContent.itemContent.poster) = "String" or type(itemContent.itemContent.poster) = "roString"
        return itemContent.itemContent.poster + "/" + itemContent.height.ToStr()
    else
        return itemContent.itemContent.poster
    end if
end function
